(function(e){function n(n){for(var o,r,i=n[0],u=n[1],a=n[2],d=0,b=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&b.push(c[r][0]),c[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(n);while(b.length)b.shift()();return s.push.apply(s,a||[]),t()}function t(){for(var e,n=0;n<s.length;n++){for(var t=s[n],o=!0,i=1;i<t.length;i++){var u=t[i];0!==c[u]&&(o=!1)}o&&(s.splice(n--,1),e=r(r.s=t[0]))}return e}var o={},c={app:0},s=[];function r(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/tobirollz/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=n,i=i.slice();for(var a=0;a<i.length;a++)n(i[a]);var l=u;s.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"12b1":function(e,n,t){},"4ea2":function(e,n,t){"use strict";t("12b1")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("7a23"),c={id:"app"};function s(e,n,t,s,r,i){var u=Object(o["k"])("TobiRollz");return Object(o["f"])(),Object(o["c"])("div",c,[Object(o["d"])(u)])}var r=Object(o["q"])("data-v-34c0dd3d");Object(o["h"])("data-v-34c0dd3d");var i={id:"websocket_test"},u={key:0,id:"layout"},a={id:"chat_buttons"},l={id:"dicebox"},d={id:"log"},b=Object(o["d"])("thead",null,[Object(o["d"])("tr",null,[Object(o["d"])("th",null,"User"),Object(o["d"])("th",null,"Message")])],-1),p={key:1,id:"connecting"},f=Object(o["d"])("h3",null," Connecting... ",-1),g=Object(o["d"])("h4",null," This can take up to a couple of seconds",-1);Object(o["g"])();var O=r((function(e,n,t,c,s,r){return Object(o["f"])(),Object(o["c"])("div",i,[r.connected?(Object(o["f"])(),Object(o["c"])("div",u,[Object(o["d"])("div",a,[Object(o["o"])(Object(o["d"])("input",{id:"user",class:"text_input","onUpdate:modelValue":n[1]||(n[1]=function(n){return e.user=n}),placeholder:"username"},null,512),[[o["m"],e.user]]),Object(o["o"])(Object(o["d"])("input",{id:"msg",class:"text_input","onUpdate:modelValue":n[2]||(n[2]=function(n){return e.message=n}),placeholder:"message",onKeyup:n[3]||(n[3]=Object(o["p"])((function(n){return r.sendMessage(e.message,!0)}),["enter"]))},null,544),[[o["m"],e.message]]),Object(o["d"])("input",{type:"button",id:"send",onClick:n[4]||(n[4]=function(n){return r.sendMessage(e.message,!0)}),value:"Send"})]),Object(o["d"])("div",l,[Object(o["d"])("input",{type:"button",onClick:n[5]||(n[5]=function(e){return r.sendMessage("d4",!1)}),value:"D4"}),Object(o["d"])("input",{type:"button",onClick:n[6]||(n[6]=function(e){return r.sendMessage("d6",!1)}),value:"D6"}),Object(o["d"])("input",{type:"button",onClick:n[7]||(n[7]=function(e){return r.sendMessage("d8",!1)}),value:"D8"}),Object(o["d"])("input",{type:"button",onClick:n[8]||(n[8]=function(e){return r.sendMessage("d10",!1)}),value:"D10"}),Object(o["d"])("input",{type:"button",onClick:n[9]||(n[9]=function(e){return r.sendMessage("d12",!1)}),value:"D12"}),Object(o["d"])("input",{type:"button",onClick:n[10]||(n[10]=function(e){return r.sendMessage("d20",!1)}),value:"D20"})]),Object(o["d"])("table",d,[b,Object(o["d"])("tbody",null,[(Object(o["f"])(!0),Object(o["c"])(o["a"],null,Object(o["j"])(r.msgLog,(function(e){return Object(o["f"])(),Object(o["c"])("tr",{key:e.id},[Object(o["d"])("td",null,Object(o["l"])(e.user),1),Object(o["d"])("td",null,Object(o["l"])(e.message),1)])})),128))])])])):(Object(o["f"])(),Object(o["c"])("div",p,[f,g]))])})),j={name:"TobiRollz",data:function(){return{connection:null,message:null,user:null}},computed:{connected:function(){return this.$store.state.connected},msgLog:function(){return this.$store.state.msgLog}},methods:{sendMessage:function(e,n){this.connected&&(null!==e&&null!==this.user&&""!==e&&""!==this.user?this.connection.send(JSON.stringify({type:"message",content:{user:this.user,message:e}})):alert("user or message not specified!")),n&&(this.message="")},sendStayAlive:function(){this.connected&&this.connection.send(JSON.stringify({type:"stay_alive"}))},changeConnectionStatus:function(e){this.$store.commit("changeConnectionStatus",e)},setupConnection:function(){var e=this;console.log("Starting connection to WebSocket Server"),this.connection=new WebSocket("wss://flaxen-quick-leptoceratops.glitch.me"),this.connection.onmessage=function(n){var t=JSON.parse(n.data);"log"===t.type?e.$store.commit("setMsgLog",t.content):"error"===t.type?console.error("backend error:",t.content):console.error("unknown response:",t)},this.connection.onopen=function(){e.changeConnectionStatus(!0)},this.connection.onclose=function(n){console.log("Socket is closed. Reconnect will be attempted in 1 second.",n.reason),e.changeConnectionStatus(!1),setTimeout((function(){e.setupConnection()}),1e3)},this.connection.onerror=function(n){console.error("Socket encountered error: ",n.message,"Closing socket"),e.changeConnectionStatus(!1),e.connection.close()}}},created:function(){var e=this;console.log("environment: ","production"),this.setupConnection(),setInterval((function(){e.sendStayAlive()}),12e4)}};t("4ea2");j.render=O,j.__scopeId="data-v-34c0dd3d";var h=j,v={name:"App",components:{TobiRollz:h}};t("6f74");v.render=s;var m=v,y=t("5502"),k=Object(y["a"])({state:{connected:!1,connection:null,msgLog:null},mutations:{addConnection:function(e,n){e.connection=n},changeConnectionStatus:function(e,n){e.connected=n,console.log("changed connection-status to",n)},setMsgLog:function(e,n){e.msgLog=n}},actions:{},modules:{}});Object(o["b"])(m).use(k).mount("#app")},"5d9c":function(e,n,t){},"6f74":function(e,n,t){"use strict";t("5d9c")}});
//# sourceMappingURL=app.602a4b58.js.map