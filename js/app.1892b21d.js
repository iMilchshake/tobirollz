(function(e){function t(t){for(var o,r,i=t[0],u=t[1],a=t[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,a||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var u=n[i];0!==c[u]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},c={app:0},s=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/tobirollz/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var a=0;a<i.length;a++)t(i[a]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01da":function(e,t,n){"use strict";n("c2fc")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),c={id:"app"};function s(e,t,n,s,r,i){var u=Object(o["k"])("TobiRollz");return Object(o["f"])(),Object(o["c"])("div",c,[Object(o["d"])(u)])}var r=Object(o["q"])("data-v-0f0f7ac2");Object(o["h"])("data-v-0f0f7ac2");var i={id:"websocket_test"},u={key:0,id:"layout"},a={id:"chat_buttons"},l={id:"dicebox"},d={id:"log"},f=Object(o["d"])("thead",null,[Object(o["d"])("tr",null,[Object(o["d"])("th",null,"User"),Object(o["d"])("th",null,"Message")])],-1),p={key:1,id:"connecting"},b=Object(o["d"])("h3",null," Connecting... ",-1),g=Object(o["d"])("h4",null," This can take up to a couple of seconds",-1);Object(o["g"])();var O=r((function(e,t,n,c,s,r){return Object(o["f"])(),Object(o["c"])("div",i,[r.connected?(Object(o["f"])(),Object(o["c"])("div",u,[Object(o["d"])("div",a,[Object(o["o"])(Object(o["d"])("input",{id:"user",class:"text_input","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user=t}),placeholder:"username"},null,512),[[o["m"],e.user]]),Object(o["o"])(Object(o["d"])("input",{id:"msg",class:"text_input","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.message=t}),placeholder:"message",onKeyup:t[3]||(t[3]=Object(o["p"])((function(t){return r.sendMessage(e.message,!0)}),["enter"]))},null,544),[[o["m"],e.message]]),Object(o["d"])("input",{type:"button",id:"send",onClick:t[4]||(t[4]=function(t){return r.sendMessage(e.message,!0)}),value:"Send"})]),Object(o["d"])("div",l,[Object(o["d"])("input",{type:"button",onClick:t[5]||(t[5]=function(e){return r.sendMessage("d4",!1)}),value:"D4"}),Object(o["d"])("input",{type:"button",onClick:t[6]||(t[6]=function(e){return r.sendMessage("d6",!1)}),value:"D6"}),Object(o["d"])("input",{type:"button",onClick:t[7]||(t[7]=function(e){return r.sendMessage("d8",!1)}),value:"D8"}),Object(o["d"])("input",{type:"button",onClick:t[8]||(t[8]=function(e){return r.sendMessage("d10",!1)}),value:"D10"}),Object(o["d"])("input",{type:"button",onClick:t[9]||(t[9]=function(e){return r.sendMessage("d12",!1)}),value:"D12"}),Object(o["d"])("input",{type:"button",onClick:t[10]||(t[10]=function(e){return r.sendMessage("d20",!1)}),value:"D20"})]),Object(o["d"])("table",d,[f,Object(o["d"])("tbody",null,[(Object(o["f"])(!0),Object(o["c"])(o["a"],null,Object(o["j"])(r.msgLog,(function(e){return Object(o["f"])(),Object(o["c"])("tr",{key:e.id},[Object(o["d"])("td",null,Object(o["l"])(e.user),1),Object(o["d"])("td",null,Object(o["l"])(e.message),1)])})),128))])])])):(Object(o["f"])(),Object(o["c"])("div",p,[b,g]))])})),j={name:"TobiRollz",data:function(){return{connection:null,message:null,user:null}},computed:{connected:function(){return this.$store.state.connected},msgLog:function(){return this.$store.state.msgLog}},methods:{sendMessage:function(e,t){this.connected&&(null!==e&&null!==this.user&&""!==e&&""!==this.user?this.connection.send(JSON.stringify({type:"message",content:{user:this.user,message:e}})):alert("user or message not specified!")),t&&(this.message="")},sendStayAlive:function(){this.connected&&this.connection.send(JSON.stringify({type:"stay_alive"}))},changeConnectionStatus:function(e){this.$store.commit("changeConnectionStatus",e)},setupConnection:function(){var e=this;console.log("Starting connection to WebSocket Server"),this.connection=new WebSocket("wss://flaxen-quick-leptoceratops.glitch.me"),this.connection.onmessage=function(t){var n=JSON.parse(t.data);"log"===n.type?e.$store.commit("setMsgLog",n.content):"error"===n.type?console.error("backend error:",n.content):console.error("unknown response:",n)},this.connection.onopen=function(){e.changeConnectionStatus(!0)},this.connection.onclose=function(t){console.log("Socket is closed. Reconnect will be attempted in 1 second.",t.reason),e.changeConnectionStatus(!1),setTimeout((function(){e.setupConnection()}),1e3)},this.connection.onerror=function(t){console.error("Socket encountered error: ",t.message,"Closing socket"),e.changeConnectionStatus(!1),e.connection.close()}}},created:function(){var e=this;this.setupConnection(),setInterval((function(){console.log("stay_alive requested"),e.sendStayAlive()}),12e4)}};n("01da");j.render=O,j.__scopeId="data-v-0f0f7ac2";var h=j,v={name:"App",components:{TobiRollz:h}};n("6f74");v.render=s;var m=v,y=n("5502"),k=Object(y["a"])({state:{connected:!1,connection:null,msgLog:null},mutations:{addConnection:function(e,t){e.connection=t},changeConnectionStatus:function(e,t){e.connected=t,console.log("changed connection-status to",t)},setMsgLog:function(e,t){e.msgLog=t}},actions:{},modules:{}});Object(o["b"])(m).use(k).mount("#app")},"5d9c":function(e,t,n){},"6f74":function(e,t,n){"use strict";n("5d9c")},c2fc:function(e,t,n){}});
//# sourceMappingURL=app.1892b21d.js.map